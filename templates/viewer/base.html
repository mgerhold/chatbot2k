{% extends "base.html" %}

{% block head_extra %}
<style>
    .dashboard-container {
        display: flex;
        gap: 2rem;
        margin-top: 2rem;
    }

    .dashboard-sidebar {
        flex: 0 0 250px;
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 1.5rem;
        height: fit-content;
        position: sticky;
        top: 80px;
    }

    .dashboard-sidebar h2 {
        margin: 0 0 1rem 0;
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--text);
    }

    .dashboard-nav {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .dashboard-nav li {
        margin-bottom: 0.5rem;
    }

    .dashboard-nav a {
        display: block;
        padding: 0.75rem 1rem;
        color: var(--link);
        text-decoration: none;
        border-radius: 6px;
        transition: background 0.2s ease, color 0.15s ease;
        font-weight: 500;
    }

    .dashboard-nav a:hover,
    .dashboard-nav a:focus-visible {
        background: rgba(96, 165, 250, 0.12);
        color: var(--link-hover);
    }

    .dashboard-nav a.active {
        background: rgba(96, 165, 250, 0.2);
        color: var(--accent);
        font-weight: 600;
    }

    .nav-badge {
        display: inline-block;
        margin-left: 0.5rem;
        padding: 0.125rem 0.5rem;
        background: #ef4444;
        color: white;
        border-radius: 10px;
        font-size: 0.75rem;
        font-weight: 600;
        line-height: 1;
    }

    .nav-badge.read-only {
        background: rgba(255, 255, 255, 0.2);
        color: var(--text);
    }

    .dashboard-content {
        flex: 1;
        min-width: 0;
    }

    .dashboard-header {
        margin-bottom: 2rem;
    }

    .dashboard-header h1 {
        margin: 0 0 0.5rem 0;
        font-size: 2rem;
        font-weight: 700;
    }

    .dashboard-header p {
        margin: 0;
        color: var(--muted);
        font-size: 1.1rem;
    }

    @media (max-width: 768px) {
        .dashboard-container {
            flex-direction: column;
        }

        .dashboard-sidebar {
            position: static;
            flex: none;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <aside class="dashboard-sidebar">
        <h2>Viewer Dashboard</h2>
        <nav>
            <ul class="dashboard-nav">
                <li>
                    <a href="{{ request.app.url_path_for('viewer_dashboard_notifications') }}" 
                       class="{% if active_page == 'notifications' %}active{% endif %}">
                        Notifications
                        {% if unread_notifications_count > 0 %}
                        <span class="nav-badge" id="viewer-nav-badge">{{ unread_notifications_count }}</span>
                        {% elif total_notifications_count > 0 %}
                        <span class="nav-badge read-only" id="viewer-nav-badge">{{ total_notifications_count }}</span>
                        {% endif %}
                    </a>
                </li>
                <li>
                    <a href="{{ request.app.url_path_for('viewer_soundboard') }}" 
                       class="{% if active_page == 'soundboard' %}active{% endif %}">
                        Soundboard
                    </a>
                </li>
                <li>
                    <a href="{{ request.app.url_path_for('viewer_dashboard_profile') }}" 
                       class="{% if active_page == 'profile' %}active{% endif %}">
                        Profile
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <main class="dashboard-content">
        {% block dashboard_content %}{% endblock %}
    </main>
</div>
{% endblock %}
